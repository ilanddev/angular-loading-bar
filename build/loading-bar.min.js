/*! 
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(b,c,d,e,f,g){function h(){d.cancel(j),g.complete(),l=0,k=0}function i(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d&&void 0!==d.get(b.url);return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var j,k=0,l=0,m=g.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||i(a)||!g.isLoaderActivated()||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===k&&(j=d(function(){g.start()},m)),k++,g.set(l/k)),a},response:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||!g.isLoaderActivated()||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),a):(f.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||!g.isLoaderActivated()||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),b.reject(a)):(f.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b.reject(a))}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.isActivate=!1,this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){if(c.cancel(q),!v){var a=b[0],e=a.querySelector?a.querySelector(r):b.find(r)[0];e||(e=a.getElementsByTagName("body")[0]);var g=angular.element(e),h=e.lastChild&&angular.element(e.lastChild);d.$broadcast("cfpLoadingBar:started"),v=!0,o=k(),z&&o.enter(s,g,h),y&&o.enter(u,g,s),f(A)}}function f(a){if(v){if(w<a){var b=100*a+"%";t.css("width",b),w=a}x&&(c.cancel(p),p=c(function(){g()},250))}}function g(){function a(a){return 5.5/-99*a+6}function b(b){var c=a(b);return Math.random()*c/100}if(h()>=1){var c=k().leave(s,i);return c&&c.then&&c.then(i),void d.$broadcast("cfpLoadingBar:completed")}var e=0,g=h();e=g>=.99?0:b(g);var j=h()+e;f(j)}function h(){return w}function i(){w=0,v=!1}function j(){c.cancel(q),q=c(function(){f(1),k().leave(u),m(!1)},500)}function k(){return o||(o=a.get("$animate")),o}function l(){return B}function m(a){"boolean"==typeof a&&(B=a)}function n(a){return"string"!=typeof a?"Please provide a string as selector.":void(B=a)}var o,p,q,r=this.parentSelector,s=angular.element(this.loadingBarTemplate),t=s.find("div").eq(0),u=angular.element(this.spinnerTemplate),v=!1,w=0,x=this.autoIncrement,y=this.includeSpinner,z=this.includeBar,A=this.startSize,B=this.isActivate;return{start:e,set:f,status:h,inc:g,complete:j,useLoader:m,setParentSelector:n,isLoaderActivated:l,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();